sessions=`tmux ls`

SAVEIFS=$IFS   # Save current IFS
IFS=$'\n'      # Change IFS to new line
sessions=($sessions) # split to array $names
IFS=$SAVEIFS   # Restore IFS

if [ "${#sessions[@]}" -eq "0" ]; then
	tmux
	exit
fi

if [ "${#sessions[@]}" -eq "1" ]; then
	tmux a -t $(echo ${sessions[0]} | cut -d ':' -f1)
	exit
fi

session=$(tmux ls | fzf --height 40% | cut -d ":" -f 1)

if [ -n "$TMUX" ]; then
  # Inside tmux, switch client to the session
  tmux switch-client -t "$session"
else
  # Outside tmux, attach to the session
  tmux attach -t "$session"
fi
